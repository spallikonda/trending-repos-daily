<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Trending Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#667eea',
                        secondary: '#764ba2',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }

        .rank-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .hover-lift:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .stat-badge {
            transition: all 0.2s;
        }

        .stat-badge:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- Main Container -->
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-12">
        
        <!-- Header -->
        <header class="text-center mb-8 sm:mb-12 lg:mb-16 fade-in-up">
            <h1 class="text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-bold text-white mb-3 sm:mb-4 drop-shadow-lg">
                üìä Top Trending GitHub Repos Today
            </h1>
            <p class="text-sm sm:text-base lg:text-lg text-white/90 font-light">
                Daily updated - trending repositories (with historical data)
            </p>
        </header>

        <!-- Controls Card -->
        <div class="glass-effect rounded-2xl sm:rounded-3xl p-4 sm:p-6 lg:p-8 mb-6 sm:mb-8 lg:mb-12 shadow-2xl fade-in-up">
            <!-- Tabs -->
            <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 mb-6">
                <button 
                    class="tab px-6 py-3 sm:px-8 sm:py-4 rounded-xl sm:rounded-2xl font-semibold text-sm sm:text-base lg:text-lg transition-all duration-300 bg-gradient-to-r from-primary to-secondary [...]"
                    data-view="today"
                >
                    <span class="hidden sm:inline">üèÜ Today's Top 10</span>
                    <span class="sm:hidden">üèÜ Today</span>
                </button>
                <button 
                    class="tab px-6 py-3 sm:px-8 sm:py-4 rounded-xl sm:rounded-2xl font-semibold text-sm sm:text-base lg:text-lg transition-all duration-300 bg-gray-100 text-gray-700 hover:bg-gray-200[...]"
                    data-view="history"
                >
                    <span class="hidden sm:inline">üìÖ Historical View</span>
                    <span class="sm:hidden">üìÖ History</span>
                </button>
            </div>
            
            <!-- Date Selector -->
            <div class="hidden" id="dateSelector">
                <label for="dateSelect" class="block text-sm sm:text-base font-semibold text-gray-700 mb-2 sm:mb-3">
                    Select Date:
                </label>
                <select 
                    id="dateSelect" 
                    class="w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-4 text-sm sm:text-base rounded-xl sm:rounded-2xl border-2 border-gray-200 focus:border-primary focus:ring-4 focus:ring-primary/20 ou[...]"
                ></select>
            </div>
        </div>

        <!-- Content Area -->
        <div id="content">
            <div class="text-center py-12 sm:py-20 fade-in-up">
                <div class="inline-block">
                    <div class="animate-spin rounded-full h-16 w-16 sm:h-20 sm:w-20 border-b-4 border-white mb-4"></div>
                    <p class="text-white text-lg sm:text-xl lg:text-2xl font-semibold">Loading trending repositories...</p>
                </div>
            </div>
        </div>

        <!-- Last Updated -->
        <div id="lastUpdated" class="text-center mt-8 sm:mt-12 text-white/80 text-sm sm:text-base font-medium"></div>
    </div>

    <script>
        let allData = {};
        let currentView = 'today';

        // Initialize
        async function init() {
            await loadData();
            setupEventListeners();
            displayTodaysTrending();
        }

        // Load data from JSON file
        async function loadData() {
            try {
                const response = await fetch('data/trending-history.json');
                allData = await response.json();
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('content').innerHTML = `
                    <div class="glass-effect rounded-2xl sm:rounded-3xl p-6 sm:p-8 lg:p-12 text-center shadow-2xl max-w-2xl mx-auto fade-in-up">
                        <div class="text-5xl sm:text-6xl mb-4">‚ùå</div>
                        <h2 class="text-2xl sm:text-3xl font-bold text-red-600 mb-3 sm:mb-4">Error Loading Data</h2>
                        <p class="text-base sm:text-lg text-gray-600">Could not load trending repositories. Please try again later.</p>
                    </div>
                `;
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    document.querySelectorAll('.tab').forEach(t => {
                        t.classList.remove('bg-gradient-to-r', 'from-primary', 'to-secondary', 'text-white', 'shadow-lg', 'active');
                        t.classList.add('bg-gray-100', 'text-gray-700');
                    });
                    e.target.classList.remove('bg-gray-100', 'text-gray-700');
                    e.target.classList.add('bg-gradient-to-r', 'from-primary', 'to-secondary', 'text-white', 'shadow-lg', 'active');
                    
                    currentView = e.target.dataset.view;
                    
                    if (currentView === 'today') {
                        document.getElementById('dateSelector').classList.add('hidden');
                        displayTodaysTrending();
                    } else {
                        document.getElementById('dateSelector').classList.remove('hidden');
                        populateDateSelector();
                        displayHistoricalView();
                    }
                });
            });

            document.getElementById('dateSelect').addEventListener('change', displayHistoricalView);
        }

        // Display today's trending repos
        function displayTodaysTrending() {
            const dates = Object.keys(allData).sort().reverse();
            if (dates.length === 0) {
                document.getElementById('content').innerHTML = `
                    <div class="glass-effect rounded-2xl sm:rounded-3xl p-6 sm:p-8 text-center shadow-2xl max-w-2xl mx-auto">
                        <p class="text-lg sm:text-xl text-gray-600">No data available</p>
                    </div>
                `;
                return;
            }

            const latestDate = dates[0];
            const repos = allData[latestDate];

            displayRepos(repos, latestDate);
        }

        // Populate date selector for historical view
        function populateDateSelector() {
            const select = document.getElementById('dateSelect');
            const dates = Object.keys(allData).sort().reverse();
            
            select.innerHTML = dates.map(date => 
                `<option value="${date}">${formatDate(date)}</option>`
            ).join('');
        }

        // Display historical view
        function displayHistoricalView() {
            const selectedDate = document.getElementById('dateSelect').value;
            const repos = allData[selectedDate];
            displayRepos(repos, selectedDate);
        }

        // Display repository cards
        function displayRepos(repos, date) {
            if (!repos || repos.length === 0) {
                document.getElementById('content').innerHTML = `
                    <div class="glass-effect rounded-2xl sm:rounded-3xl p-6 sm:p-8 text-center shadow-2xl max-w-2xl mx-auto">
                        <p class="text-lg sm:text-xl text-gray-600">No repositories found for this date</p>
                    </div>
                `;
                return;
            }

            const html = `
                <div class="grid grid-cols-1 gap-4 sm:gap-6 lg:gap-8">
                    ${repos.map((repo, index) => `
                        <div class="glass-effect rounded-2xl sm:rounded-3xl p-5 sm:p-6 lg:p-8 shadow-xl hover-lift relative overflow-hidden fade-in-up" style="animation-delay: ${index * 0.1}s">
                            <!-- Rank Badge -->
                            <div class="absolute top-4 sm:top-6 right-4 sm:right-6 rank-badge text-white w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 rounded-full flex items-center justify-center font-bo[...]">
                                ${index + 1}
                            </div>
                            
                            <!-- Repo Name -->
                            <div class="mb-3 sm:mb-4 pr-12 sm:pr-16">
                                <a href="${repo.url}" target="_blank" rel="noopener noreferrer" class="text-lg sm:text-xl lg:text-2xl font-bold text-primary hover:text-secondary transition-colors line[...]">
                                    ${repo.name}
                                </a>
                            </div>
                            
                            <!-- Description -->
                            <p class="text-sm sm:text-base text-gray-600 mb-4 sm:mb-6 line-clamp-3 leading-relaxed">
                                ${repo.description || 'No description available'}
                            </p>
                            
                            <!-- Stats -->
                            <div class="flex flex-wrap gap-2 sm:gap-3 lg:gap-4 mb-3 sm:mb-4">
                                <div class="stat-badge flex items-center gap-1.5 sm:gap-2 bg-yellow-50 px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl">
                                    <span class="text-base sm:text-lg lg:text-xl">‚≠ê</span>
                                    <span class="font-semibold text-yellow-700 text-xs sm:text-sm lg:text-base">${formatNumber(repo.stars)}</span>
                                </div>
                                <div class="stat-badge flex items-center gap-1.5 sm:gap-2 bg-blue-50 px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl">
                                    <span class="text-base sm:text-lg lg:text-xl">üîÄ</span>
                                    <span class="font-semibold text-blue-700 text-xs sm:text-sm lg:text-base">${formatNumber(repo.forks)}</span>
                                </div>
                                ${repo.stars_today ? `
                                <div class="stat-badge flex items-center gap-1.5 sm:gap-2 bg-green-50 px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl">
                                    <span class="text-base sm:text-lg lg:text-xl">üìà</span>
                                    <span class="font-semibold text-green-700 text-xs sm:text-sm lg:text-base">${formatNumber(repo.stars_today)} today</span>
                                </div>
                                ` : ''}
                            </div>
                            
                            <!-- Language -->
                            ${repo.language ? `
                            <div class="inline-block">
                                <span class="bg-gradient-to-r from-primary/10 to-secondary/10 text-primary px-3 sm:px-4 py-1 sm:py-1.5 rounded-lg sm:rounded-xl text-xs sm:text-sm font-semibold border [...]">
                                    ${repo.language}
                                </span>
                            </div>
                            ` : ''}
                        </div>
                    `).join('')}
                </div>
            `;

            document.getElementById('content').innerHTML = html;
            document.getElementById('lastUpdated').innerHTML = `
                <span class="inline-block bg-white/20 backdrop-blur-sm px-4 sm:px-6 py-2 sm:py-3 rounded-xl sm:rounded-2xl">
                    Last updated: ${formatDate(date)}
                </span>
            `;
        }

        // Utility functions
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'k';
            }
            return num.toString();
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        // Start the app
        init();
    </script>
</body>
</html>
